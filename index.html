<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gold Melaris — Game Mode</title>

<style>
html,body{
  margin:0;
  padding:0;
  background:black;
  overflow:hidden;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

/* ===== UI OVERLAY ===== */
#ui{
  position:fixed;
  inset:0;
  pointer-events:none;
  color:white;
}

#panel{
  position:absolute;
  bottom:90px;
  left:50%;
  transform:translateX(-50%);
  width:90%;
  max-width:420px;
  padding:18px;
  border-radius:20px;
  background:linear-gradient(135deg,rgba(255,255,255,.18),rgba(255,255,255,.05));
  backdrop-filter: blur(12px);
  box-shadow:0 20px 40px rgba(0,0,0,.6);
  pointer-events:auto;
}

select,button{
  width:100%;
  margin-top:12px;
  padding:14px;
  font-size:1.05em;
  border-radius:14px;
  border:none;
}

button{
  margin-top:16px;
  font-weight:900;
  background:linear-gradient(135deg,#ffd700,#ff9900);
  color:black;
}

#price{
  margin-top:12px;
  font-size:1.4em;
  font-weight:900;
  color:#ffd700;
  text-align:center;
}

#ceo{
  position:absolute;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  padding:10px 18px;
  border-radius:14px;
  background:linear-gradient(135deg,#2f80ed,#56ccf2);
  font-size:.85em;
  box-shadow:0 10px 25px rgba(0,0,0,.6);
}

#ceo a{
  color:#e9f9ff;
  text-decoration:none;
  font-weight:800;
}
</style>
</head>

<body>

<canvas id="game"></canvas>

<div id="ui">
  <div id="panel">
    <select id="size">
      <option disabled selected>Select scoop size</option>
      <option>Small</option>
      <option>Medium</option>
      <option>Large</option>
    </select>

    <select id="rarity">
      <option disabled selected>Select bead rarity</option>
      <option>Common</option>
      <option>Rare</option>
      <option>Epic</option>
      <option>Legendary</option>
    </select>

    <div id="price">Select options</div>
    <button id="confirm">CONFIRM PACK</button>
  </div>

  <div id="ceo">
    CEO: Mitko —
    <a href="https://youtube.com/@robux_gaming_gamer" target="_blank">
      Robux_gaming_gamer
    </a>
  </div>
</div>

<script>
/* ================= CANVAS ================= */
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
resize();
addEventListener("resize",resize);

/* ================= CAMERA ================= */
const camera={x:0,y:0,shake:0};

function shake(power){
  camera.shake=Math.max(camera.shake,power);
}

/* ================= PRICES ================= */
const prices={
  Small:{Common:5,Rare:12,Epic:20,Legendary:50},
  Medium:{Common:10,Rare:22,Epic:40,Legendary:65},
  Large:{Common:20,Rare:30,Epic:55,Legendary:80}
};

/* ================= UI ================= */
const sizeSel=document.getElementById("size");
const raritySel=document.getElementById("rarity");
const priceBox=document.getElementById("price");
const confirmBtn=document.getElementById("confirm");

sizeSel.onchange=raritySel.onchange=()=>{
  if(prices[sizeSel.value]?.[raritySel.value]){
    priceBox.textContent="€"+prices[sizeSel.value][raritySel.value];
  }
};

confirmBtn.onclick=()=>{
  if(!prices[sizeSel.value]?.[raritySel.value])return;
  explode(raritySel.value);
};

/* ================= BEADS ================= */
class Bead{
  constructor(color){
    this.x=canvas.width/2;
    this.y=canvas.height*0.55;
    this.z=Math.random()*300;
    this.vx=(Math.random()-0.5)*14;
    this.vy=(Math.random()-1.3)*16;
    this.vz=Math.random()*10;
    this.r=10+Math.random()*6;
    this.life=220;
    this.color=color;
  }
  update(){
    this.vy+=0.6;
    this.x+=this.vx;
    this.y+=this.vy;
    this.z+=this.vz;
    if(this.y>canvas.height){
      this.y=canvas.height;
      this.vy*=-0.45;
    }
    this.life--;
  }
  draw(){
    const depth=Math.max(.3,1-this.z/400);
    ctx.beginPath();
    ctx.fillStyle=this.color;
    ctx.shadowColor=this.color;
    ctx.shadowBlur=30*depth;
    ctx.arc(
      this.x+camera.x,
      this.y+camera.y,
      this.r*depth,
      0,Math.PI*2
    );
    ctx.fill();
  }
}

let beads=[];

/* ================= SPAWN ================= */
function explode(level){
  const palettes={
    Common:["#aaa"],
    Rare:["#00aaff","#66ccff"],
    Epic:["#aa00ff","#ff00ff"],
    Legendary:["#ffd700","#ffae00","#fff3a0"]
  };

  const count=level==="Legendary"?90:level==="Epic"?55:level==="Rare"?35:18;
  for(let i=0;i<count;i++){
    beads.push(new Bead(
      palettes[level][Math.floor(Math.random()*palettes[level].length)]
    ));
  }

  if(level==="Rare")shake(12);
  if(level==="Epic")shake(28);
  if(level==="Legendary")shake(60);
}

/* ================= LOOP ================= */
function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // background
  const g=ctx.createRadialGradient(
    canvas.width/2,canvas.height/2,80,
    canvas.width/2,canvas.height/2,canvas.width
  );
  g.addColorStop(0,"#1a1200");
  g.addColorStop(1,"#000");
  ctx.fillStyle=g;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // camera shake (physical)
  if(camera.shake>0){
    camera.x=(Math.random()-0.5)*camera.shake;
    camera.y=(Math.random()-0.5)*camera.shake;
    camera.shake*=0.88;
  }else{
    camera.x=0;
    camera.y=0;
  }

  beads=beads.filter(b=>b.life>0);
  beads.forEach(b=>{
    b.update();
    b.draw();
  });

  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>